@inherits EntryFormBase

<MudStack Spacing="1"
          Row="true"
          Justify="Justify.SpaceBetween">
    <MudText Typo="Typo.h4">@SelectedEntry</MudText>

    <MudStack Spacing="1"
              Row="true">
        @if (IsPasswordReadOnly)
        {
            <MudButton StartIcon="@Icons.Material.Filled.Edit"
                       Variant="Variant.Filled"
                       Size="Size.Small"
                       OnClick="@EditPassword"
                       Color="Color.Primary">
                Edit
            </MudButton>
        }
        else
        {
            <MudButton StartIcon="@Icons.Material.Filled.Cancel"
                       Variant="Variant.Filled"
                       Size="Size.Small"
                       OnClick="@CancelPassword"
                       Color="Color.Error">
                Cancel
            </MudButton>
            <MudButton StartIcon="@Icons.Material.Filled.Save"
                       Variant="Variant.Filled"
                       Size="Size.Small"
                       OnClick="@SavePassword"
                       Disabled="@(!IsPasswordValid)"
                       Color="Color.Success">
                Save
            </MudButton>
        }
    </MudStack>
</MudStack>

<PasswordField IsValid="@(e => IsPasswordValid = e)"
               IsReadOnly="@IsPasswordReadOnly"/>

<MudStack Spacing="1"
          Row="true"
          Style="margin-top: 1rem"
          Justify="Justify.SpaceBetween">
    <MudText Typo="Typo.h6">@(AreMetadatasReadOnly ? string.Empty : "Metadata")</MudText>

    <MudStack Spacing="1"
              Row="true">
        @if (AreMetadatasReadOnly)
        {
            <MudButton StartIcon="@Icons.Material.Filled.Visibility"
                       Variant="Variant.Filled"
                       Size="Size.Small"
                       OnClick="@EditMetadatas"
                       Color="Color.Primary">
                Reveal metadata
            </MudButton>
        }
        else
        {
            <MudButton StartIcon="@Icons.Material.Filled.Cancel"
                       Variant="Variant.Filled"
                       Size="Size.Small"
                       OnClick="@CancelMetadatas"
                       Color="Color.Error">
                Cancel
            </MudButton>
            <MudButton StartIcon="@Icons.Material.Filled.Save"
                       Variant="Variant.Filled"
                       Size="Size.Small"
                       OnClick="@SaveMetadatas"
                       Disabled="@(!IsPasswordValid)"
                       Color="Color.Success">
                Save
            </MudButton>
        }
    </MudStack>
</MudStack>

@foreach (var metadata in Metadatas)
{
    <MudStack Spacing="2"
              Row="true">
        <MudTextField T="string"
                      Placeholder="Key"
                      Label="Key"
                      Style="width: 30vw"
                      Adornment="Adornment.Start"
                      Variant="Variant.Outlined"
                      Value="@metadata.Key"
                      Immediate="true"
                      Required="true"
                      AdornmentIcon="@Icons.Material.Filled.Category"/>
        <MudTextField T="string"
                      Placeholder="Value"
                      Label="Value"
                      FullWidth="true"
                      Adornment="Adornment.Start"
                      Variant="Variant.Outlined"
                      Value="@metadata.Value"
                      Immediate="true"
                      Required="true"
                      AdornmentIcon="@Icons.Material.Filled.Category"/>
    </MudStack>
}