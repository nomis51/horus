@using Markdig.Extensions.SmartyPants
@inherits InitStoreFormBase

<MudDialog>
    <TitleContent>
        <MudText Typo="Typo.h4">Initialize store</MudText>
    </TitleContent>
    <DialogContent>
        <MudStack Spacing="2">
            <MudTextField T="string"
                          Placeholder="GPG ID (full ID)"
                          Label="GPG ID"
                          DebounceInterval="200"
                          Value="@GpgId"
                          OnDebounceIntervalElapsed="@SetGpgId"
                          Adornment="Adornment.Start"
                          Required="true"
                          Variant="Variant.Outlined"
                          Immediate="true"
                          AdornmentIcon="@Icons.Material.Filled.Fingerprint"/>
            <MudTextField T="string"
                          Placeholder="Private remote Git repository URL"
                          Label="Private remote Git repository URL"
                          Value="@GitUrl"
                          ValueChanged="@SetGitHubUrl"
                          Adornment="Adornment.Start"
                          Required="true"
                          Variant="Variant.Outlined"
                          Immediate="true"
                          AdornmentIcon="@Icons.Custom.Brands.GitHub"/>
        </MudStack>
    </DialogContent>
    <DialogActions>
        <MudSpacer/>
        @if (IsLoading)
        {
            <MudProgressCircular Size="Size.Small"
                                 Color="Color.Primary"
                                 Indeterminate="true"/>
        }
        <MudButton Variant="Variant.Text"
                   OnClick="@Quit"
                   Disabled="@(IsLoading)">
            Quit
        </MudButton>
        <MudButton Variant="Variant.Filled"
                   Disabled="@(IsLoading || !IsGpgIdValid || string.IsNullOrEmpty(GpgId) || string.IsNullOrEmpty(GitUrl))"
                   Color="Color.Primary"
                   OnClick="@Create">
            Create
        </MudButton>
    </DialogActions>
</MudDialog>